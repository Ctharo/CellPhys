[gd_scene load_steps=6 format=3 uid="uid://cro6fq6thlcea"]

[ext_resource type="Script" uid="uid://buw4t1x75eok5" path="res://ui.gd" id="1_ui"]
[ext_resource type="Script" uid="uid://jkoy5w1wdlvj" path="res://simulator.gd" id="2_sim"]
[ext_resource type="PackedScene" uid="uid://b5xmrwvkp2qhe" path="res://dock_panel.tscn" id="3_dock"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_toolbar"]
content_margin_left = 10.0
content_margin_top = 6.0
content_margin_right = 10.0
content_margin_bottom = 6.0
bg_color = Color(0.12, 0.12, 0.15, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_locks"]
content_margin_left = 8.0
content_margin_top = 4.0
content_margin_right = 8.0
content_margin_bottom = 4.0
bg_color = Color(0.1, 0.1, 0.12, 1)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0.25, 0.25, 0.3, 1)
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4

[node name="Main2" type="Control" unique_id=520697240]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_ui")

[node name="SimEngine" type="Node" parent="." unique_id=355569376]
unique_name_in_owner = true
script = ExtResource("2_sim")

[node name="VBox" type="VBoxContainer" parent="." unique_id=1642170835]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 0

[node name="Toolbar" type="PanelContainer" parent="VBox" unique_id=1711805182]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_toolbar")

[node name="HBox" type="HBoxContainer" parent="VBox/Toolbar" unique_id=1899223062]
layout_mode = 2
theme_override_constants/separation = 12

[node name="Title" type="Label" parent="VBox/Toolbar/HBox" unique_id=297808621]
layout_mode = 2
theme_override_font_sizes/font_size = 18
text = "üß¨ Biochemistry Simulator"

[node name="Sep1" type="VSeparator" parent="VBox/Toolbar/HBox" unique_id=2050129969]
layout_mode = 2

[node name="PauseButton" type="Button" parent="VBox/Toolbar/HBox" unique_id=1275141688]
unique_name_in_owner = true
custom_minimum_size = Vector2(90, 0)
layout_mode = 2
text = "‚ñ∂ Start"

[node name="ResetButton" type="Button" parent="VBox/Toolbar/HBox" unique_id=1841899967]
unique_name_in_owner = true
custom_minimum_size = Vector2(90, 0)
layout_mode = 2
text = "‚Ü∫ Reset"

[node name="Sep2" type="VSeparator" parent="VBox/Toolbar/HBox" unique_id=1514526505]
layout_mode = 2

[node name="SpeedLabel" type="Label" parent="VBox/Toolbar/HBox" unique_id=22272589]
layout_mode = 2
text = "Speed:"

[node name="SpeedSlider" type="HSlider" parent="VBox/Toolbar/HBox" unique_id=228558646]
unique_name_in_owner = true
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
min_value = 0.1
max_value = 10.0
step = 0.1
value = 1.0

[node name="SpeedValue" type="Label" parent="VBox/Toolbar/HBox" unique_id=809813436]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "1.0x"

[node name="Sep3" type="VSeparator" parent="VBox/Toolbar/HBox" unique_id=319976240]
layout_mode = 2

[node name="LayoutLabel" type="Label" parent="VBox/Toolbar/HBox" unique_id=1288027862]
layout_mode = 2
text = "Layout:"

[node name="LayoutOption" type="OptionButton" parent="VBox/Toolbar/HBox" unique_id=782754371]
unique_name_in_owner = true
layout_mode = 2
selected = 0
item_count = 5
popup/item_0/text = "All Panels"
popup/item_0/id = 0
popup/item_1/text = "Focus Chart"
popup/item_1/id = 1
popup/item_2/text = "Focus Genes"
popup/item_2/id = 2
popup/item_3/text = "Two Column"
popup/item_3/id = 3
popup/item_4/text = "Compact"
popup/item_4/id = 4

[node name="ViewMenu" type="MenuButton" parent="VBox/Toolbar/HBox" unique_id=2039766001]
unique_name_in_owner = true
layout_mode = 2
text = "üëÅ View"

[node name="Spacer" type="Control" parent="VBox/Toolbar/HBox" unique_id=165826734]
layout_mode = 2
size_flags_horizontal = 3

[node name="ChartLabel" type="Label" parent="VBox/Toolbar/HBox" unique_id=1195026581]
layout_mode = 2
text = "Chart:"

[node name="ChartModeOption" type="OptionButton" parent="VBox/Toolbar/HBox" unique_id=597853271]
unique_name_in_owner = true
layout_mode = 2
selected = 0
item_count = 3
popup/item_0/text = "Molecules"
popup/item_0/id = 0
popup/item_1/text = "Enzymes"
popup/item_1/id = 1
popup/item_2/text = "Both"
popup/item_2/id = 2

[node name="AutoScaleCheck" type="CheckBox" parent="VBox/Toolbar/HBox" unique_id=673464694]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "Auto Scale"

[node name="TestControlsBar" type="PanelContainer" parent="VBox" unique_id=463125046]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_locks")

[node name="HBox" type="HBoxContainer" parent="VBox/TestControlsBar" unique_id=41066978]
layout_mode = 2
theme_override_constants/separation = 16

[node name="TestLabel" type="Label" parent="VBox/TestControlsBar/HBox" unique_id=729929451]
layout_mode = 2
theme_override_font_sizes/font_size = 12
text = "üîß Test Controls:"

[node name="IsolateLabel" type="Label" parent="VBox/TestControlsBar/HBox" unique_id=63140665]
layout_mode = 2
theme_override_font_sizes/font_size = 11
text = "Quick:"

[node name="IsolateOption" type="OptionButton" parent="VBox/TestControlsBar/HBox" unique_id=2123331891]
unique_name_in_owner = true
custom_minimum_size = Vector2(120, 0)
layout_mode = 2
tooltip_text = "Quickly isolate one system for testing"
selected = 0
item_count = 7
popup/item_0/text = "Run All"
popup/item_0/id = 0
popup/item_1/text = "Test Molecules"
popup/item_1/id = 1
popup/item_2/text = "Test Enzymes"
popup/item_2/id = 2
popup/item_3/text = "Test Genes"
popup/item_3/id = 3
popup/item_4/text = "Test Reactions"
popup/item_4/id = 4
popup/item_5/text = "Test Mutations"
popup/item_5/id = 5
popup/item_6/text = "Lock All"
popup/item_6/id = 6

[node name="Sep" type="VSeparator" parent="VBox/TestControlsBar/HBox" unique_id=1148699506]
layout_mode = 2

[node name="LocksLabel" type="Label" parent="VBox/TestControlsBar/HBox" unique_id=1723785718]
layout_mode = 2
theme_override_font_sizes/font_size = 11
text = "Lock:"

[node name="LockMoleculesBtn" type="CheckButton" parent="VBox/TestControlsBar/HBox" unique_id=2079741546]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Lock molecule concentrations (reactions won't change them)"
text = "Molecules"

[node name="LockEnzymesBtn" type="CheckButton" parent="VBox/TestControlsBar/HBox" unique_id=1542639941]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Lock enzyme concentrations (no degradation)"
text = "Enzymes"

[node name="LockGenesBtn" type="CheckButton" parent="VBox/TestControlsBar/HBox" unique_id=398501280]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Lock gene expression (no enzyme synthesis)"
text = "Genes"

[node name="LockReactionsBtn" type="CheckButton" parent="VBox/TestControlsBar/HBox" unique_id=2083060446]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Lock reactions (no substrate/product changes)"
text = "Reactions"

[node name="LockMutationsBtn" type="CheckButton" parent="VBox/TestControlsBar/HBox" unique_id=2146614595]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Lock mutations (no random changes)"
button_pressed = true
text = "Mutations"

[node name="Sep2" type="VSeparator" parent="VBox/TestControlsBar/HBox" unique_id=533785451]
layout_mode = 2

[node name="MutRateLabel" type="Label" parent="VBox/TestControlsBar/HBox" unique_id=2026334096]
layout_mode = 2
theme_override_font_sizes/font_size = 11
text = "Mut Rate:"

[node name="MutationRateSlider" type="HSlider" parent="VBox/TestControlsBar/HBox" unique_id=437852760]
unique_name_in_owner = true
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
tooltip_text = "Mutations per second"
min_value = 0.01
max_value = 2.0
step = 0.01
value = 0.09999999999999999

[node name="MutationRateLabel" type="Label" parent="VBox/TestControlsBar/HBox" unique_id=2082201954]
unique_name_in_owner = true
custom_minimum_size = Vector2(50, 0)
layout_mode = 2
theme_override_font_sizes/font_size = 11
text = "0.10/s"

[node name="Spacer" type="Control" parent="VBox/TestControlsBar/HBox" unique_id=762562827]
layout_mode = 2
size_flags_horizontal = 3

[node name="MainArea" type="Control" parent="VBox" unique_id=12109129]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3

[node name="HSplit1" type="HSplitContainer" parent="VBox/MainArea" unique_id=1048653032]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="LeftColumn" type="VSplitContainer" parent="VBox/MainArea/HSplit1" unique_id=1141359330]
unique_name_in_owner = true
custom_minimum_size = Vector2(220, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="CellPanel" parent="VBox/MainArea/HSplit1/LeftColumn" unique_id=1402894254 instance=ExtResource("3_dock")]
unique_name_in_owner = true
layout_mode = 2
panel_title = "Cell Status"
panel_name = "cell"

[node name="ReactionsPanel" parent="VBox/MainArea/HSplit1/LeftColumn" unique_id=1063057171 instance=ExtResource("3_dock")]
unique_name_in_owner = true
layout_mode = 2
panel_title = "Reactions"
panel_icon = "‚öóÔ∏è"
panel_name = "reactions"

[node name="HSplit2" type="HSplitContainer" parent="VBox/MainArea/HSplit1" unique_id=1642963831]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3

[node name="MiddleColumn" type="VSplitContainer" parent="VBox/MainArea/HSplit1/HSplit2" unique_id=1558053527]
unique_name_in_owner = true
custom_minimum_size = Vector2(240, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="EnzymesPanel" parent="VBox/MainArea/HSplit1/HSplit2/MiddleColumn" unique_id=367377746 instance=ExtResource("3_dock")]
unique_name_in_owner = true
layout_mode = 2
panel_title = "Enzymes"
panel_icon = "üî¨"
panel_name = "enzymes"

[node name="MoleculesPanel" parent="VBox/MainArea/HSplit1/HSplit2/MiddleColumn" unique_id=661448926 instance=ExtResource("3_dock")]
unique_name_in_owner = true
layout_mode = 2
panel_title = "Molecules"
panel_icon = "üß™"
panel_name = "molecules"

[node name="RightColumn" type="VSplitContainer" parent="VBox/MainArea/HSplit1/HSplit2" unique_id=1097509853]
unique_name_in_owner = true
custom_minimum_size = Vector2(280, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 1.3

[node name="GenesPanel" parent="VBox/MainArea/HSplit1/HSplit2/RightColumn" unique_id=1794031426 instance=ExtResource("3_dock")]
unique_name_in_owner = true
layout_mode = 2
panel_title = "Gene Expression"
panel_icon = "üß¨"
panel_name = "genes"

[node name="ChartDock" parent="VBox/MainArea/HSplit1/HSplit2/RightColumn" unique_id=668676175 instance=ExtResource("3_dock")]
unique_name_in_owner = true
layout_mode = 2
panel_title = "Concentrations"
panel_icon = "üìà"
panel_name = "chart"
can_collapse = false

[connection signal="pressed" from="VBox/Toolbar/HBox/PauseButton" to="." method="_on_pause_pressed"]
[connection signal="pressed" from="VBox/Toolbar/HBox/ResetButton" to="." method="_on_reset_pressed"]
[connection signal="value_changed" from="VBox/Toolbar/HBox/SpeedSlider" to="." method="_on_speed_changed"]
[connection signal="item_selected" from="VBox/Toolbar/HBox/LayoutOption" to="." method="_on_layout_selected"]
[connection signal="item_selected" from="VBox/Toolbar/HBox/ChartModeOption" to="." method="_on_chart_mode_changed"]
[connection signal="toggled" from="VBox/Toolbar/HBox/AutoScaleCheck" to="." method="_on_auto_scale_toggled"]
[connection signal="item_selected" from="VBox/TestControlsBar/HBox/IsolateOption" to="." method="_on_isolate_selected"]
[connection signal="toggled" from="VBox/TestControlsBar/HBox/LockMoleculesBtn" to="." method="_on_lock_molecules_toggled"]
[connection signal="toggled" from="VBox/TestControlsBar/HBox/LockEnzymesBtn" to="." method="_on_lock_enzymes_toggled"]
[connection signal="toggled" from="VBox/TestControlsBar/HBox/LockGenesBtn" to="." method="_on_lock_genes_toggled"]
[connection signal="toggled" from="VBox/TestControlsBar/HBox/LockReactionsBtn" to="." method="_on_lock_reactions_toggled"]
[connection signal="toggled" from="VBox/TestControlsBar/HBox/LockMutationsBtn" to="." method="_on_lock_mutations_toggled"]
[connection signal="value_changed" from="VBox/TestControlsBar/HBox/MutationRateSlider" to="." method="_on_mutation_rate_changed"]
[connection signal="panel_visibility_changed" from="VBox/MainArea/HSplit1/LeftColumn/CellPanel" to="." method="_on_panel_visibility_changed"]
[connection signal="panel_visibility_changed" from="VBox/MainArea/HSplit1/LeftColumn/ReactionsPanel" to="." method="_on_panel_visibility_changed"]
[connection signal="panel_visibility_changed" from="VBox/MainArea/HSplit1/HSplit2/MiddleColumn/EnzymesPanel" to="." method="_on_panel_visibility_changed"]
[connection signal="panel_visibility_changed" from="VBox/MainArea/HSplit1/HSplit2/MiddleColumn/MoleculesPanel" to="." method="_on_panel_visibility_changed"]
[connection signal="panel_visibility_changed" from="VBox/MainArea/HSplit1/HSplit2/RightColumn/GenesPanel" to="." method="_on_panel_visibility_changed"]
[connection signal="panel_visibility_changed" from="VBox/MainArea/HSplit1/HSplit2/RightColumn/ChartDock" to="." method="_on_panel_visibility_changed"]
